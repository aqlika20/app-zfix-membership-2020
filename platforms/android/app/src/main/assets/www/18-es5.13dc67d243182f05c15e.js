function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{tQ0C:function(e,t,n){"use strict";n.r(t),n.d(t,"ScreenTestingPageModule",(function(){return p}));var a,i,s,r=n("ofXK"),o=n("3Pt+"),c=n("TEn/"),l=n("tyNb"),u=n("mrSG"),h=n("fXoL"),d=n("tNc6"),f=["screenTest"],m=[{path:"",component:(a=function(){function e(t,n,a,i){_classCallCheck(this,e),this.platform=t,this.utility=n,this.alertController=a,this.navCtrl=i,this.lineWidth=10,this.touching=!1}return _createClass(e,[{key:"ionViewWillEnter",value:function(){this.canvasElement=this.canvas.nativeElement,this.canvasElement.width=this.platform.width()+"",this.canvasElement.height=this.platform.height()+"";var e=this.canvasElement.getContext("2d");e.fillStyle="blue",e.fillRect(10,10,this.canvasElement.width-20,this.canvasElement.height-20),this.utility.showToast("Bersihkan layar untuk melanjutkan.")}},{key:"startTouch",value:function(e){this.touching=!0,this.test(e)}},{key:"moveTouch",value:function(e){this.touching&&this.test(e)}},{key:"endTouch",value:function(){this.touching=!1,this.checkCanvas()}},{key:"test",value:function(e){var t,n,a,i=this.canvasElement.getBoundingClientRect(),s=this.canvasElement.getContext("2d");for(a=0;a<e.changedTouches.length;a++)t=e.changedTouches[a].pageX-i.x,n=e.changedTouches[a].pageY-i.y;s.beginPath(),s.globalCompositeOperation="destination-out",s.arc(t,n,42,0,2*Math.PI,!1),s.fill(),this.saveX=t,this.saveY=n}},{key:"presentAlertConfirm",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"ZFix",message:"Jika anda tidak dapat melanjutkan test ini, anda bisa melewati dan lanjut ke tahap selanjutnya dengan konfirmasi bahwa layar memiliki masalah.",backdropDismiss:!1,buttons:[{text:"Lanjut",role:"cancel",handler:function(){console.log("Continue")}},{text:"Lewati",handler:function(){return Object(u.a)(n,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"ZFix",message:"Jika anda skip tahap ini, proses aktivasi tidak dapat dilanjutkan.",backdropDismiss:!1,buttons:[{text:"Lanjut",role:"cancel",handler:function(){}},{text:"Tetap skip",handler:function(){n.navCtrl.navigateForward(["landing","home"],{queryParams:{screenHasProblem:1}}),n.utility.showToast("Layar memiliki masalah.")}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"isCanvasBlank",value:function(e){var t=this.canvasElement.getContext("2d");return!new Uint32Array(t.getImageData(0,0,e.width,e.height).data.buffer).some((function(e){return 0!==e}))}},{key:"checkCanvas",value:function(){this.isCanvasBlank(this.canvasElement)?(this.utility.showToast("Layar telah bersih."),this.navCtrl.navigateForward(["/landing/membership-activation/device-detail/screen-testing/device-image"],{queryParams:{screenHasProblem:0}})):(this.utility.showToast("Layar belum dibersihkan."),this.presentAlertConfirm())}}]),e}(),a.\u0275fac=function(e){return new(e||a)(h.Lb(c.T),h.Lb(d.a),h.Lb(c.b),h.Lb(c.R))},a.\u0275cmp=h.Fb({type:a,selectors:[["app-screen-testing"]],viewQuery:function(e,t){var n;1&e&&h.Ec(f,!0),2&e&&h.qc(n=h.dc())&&(t.canvas=n.first)},decls:3,vars:1,consts:[["mode","md",3,"fullscreen"],[3,"touchstart","touchmove","touchend"],["screenTest",""]],template:function(e,t){1&e&&(h.Qb(0,"ion-content",0),h.Qb(1,"canvas",1,2),h.cc("touchstart",(function(e){return t.startTouch(e)}))("touchmove",(function(e){return t.moveTouch(e)}))("touchend",(function(){return t.endTouch()})),h.Pb(),h.Pb()),2&e&&h.jc("fullscreen",!0)},directives:[c.p],styles:["ion-content[_ngcontent-%COMP%]{--overflow:hidden}"]}),a)}],v=((s=function e(){_classCallCheck(this,e)}).\u0275mod=h.Jb({type:s}),s.\u0275inj=h.Ib({factory:function(e){return new(e||s)},imports:[[l.j.forChild(m)],l.j]}),s),p=((i=function e(){_classCallCheck(this,e)}).\u0275mod=h.Jb({type:i}),i.\u0275inj=h.Ib({factory:function(e){return new(e||i)},imports:[[r.b,o.b,c.P,v]]}),i)}}]);