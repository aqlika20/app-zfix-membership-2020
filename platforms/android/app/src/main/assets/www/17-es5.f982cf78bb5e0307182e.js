function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var i,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{hhq5:function(e,t,i){"use strict";i.r(t),i.d(t,"IndexPageModule",(function(){return I}));var n=i("ofXK"),o=i("3Pt+"),r=i("TEn/"),s=i("tyNb"),a=i("Iuce"),c=i("7o/Q"),u=i("D0XW"),l=function(){function e(t,i){_classCallCheck(this,e),this.dueTime=t,this.scheduler=i}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new h(e,this.dueTime,this.scheduler))}}]),e}(),h=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,o){var r;return _classCallCheck(this,i),(r=t.call(this,e)).dueTime=n,r.scheduler=o,r.debouncedSubscription=null,r.lastValue=null,r.hasValue=!1,r}return _createClass(i,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(b,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),i}(c.a);function b(e){e.debouncedNext()}var d,f,p,m=i("/uUt"),v=i("pLZG"),g=i("lJxs"),_=i("fXoL"),y=i("e8h1"),k=i("JN8Z"),P=i("WOgW"),S=i("UhDz"),C=i("tNc6"),w=i("xyIN"),O=i("54vc"),M=i("1kSV"),A=[{path:"",component:(d=function(){function e(t,i,n,o,r,s,a,c,h,b){var d=this;_classCallCheck(this,e),this.storage=t,this.uid=i,this.androidPermissions=n,this.platform=o,this.membershipApiService=r,this.utilsService=s,this.membership=a,this.navCtrl=c,this.router=h,this.splashScreen=b,this.imeiEditable=!0,this.stores=[],this.searchedStores=[],this.formatter=function(e){return e.name},this.search=function(e){return e.pipe(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.a;return function(i){return i.lift(new l(e,t))}}(100),Object(m.a)(),Object(v.a)((function(e){return e.length>=1})),Object(g.a)((function(e){var t;return null===(t=d.searchedStores.data)||void 0===t?void 0:t.store.filter((function(t){return new RegExp(e,"mi").test(t.name)})).slice(0,5)})))},"android"==this.platform.platforms()[0]&&(this.imei=this.uid.IMEI,null!=this.imei&&(this.imeiEditable=!1))}return _createClass(e,[{key:"ngOnInit",value:function(){this.getPermission()}},{key:"ionViewWillEnter",value:function(){this.getStore(),this.membership.removeMembershipActivation()}},{key:"getPermission",value:function(){var e=this;this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.READ_PHONE_STATE).then((function(t){t.hasPermission||e.androidPermissions.requestPermission(e.androidPermissions.PERMISSION.READ_PHONE_STATE).then((function(t){e.utilsService.restart("Aplikasi akan memulai kembali secara otomatis untuk menampilkan IMEI.")})).catch((function(t){e.utilsService.showAlert(t)}))})).catch((function(t){e.utilsService.showAlert(t)}))}},{key:"getStore",value:function(){var e=this;this.storage.get(a.d).then((function(t){e.membershipApiService.getStore(t).subscribe((function(t){e.stores=t,e.searchedStores=e.stores,console.log(e.searchedStores)}),(function(t){e.stores=[],e.searchedStores=[],e.utilsService.showToast("There is a problem.")}))}))}},{key:"submit",value:function(){var e=this;null==this.code||null==this.imei||null==this.lokasi_beli_voucher||""==this.code.replace(/\s/g,"")?this.utilsService.showToast("Lengkapi pengisian form."):this.storage.get(a.d).then((function(t){var i={request_code:0,voucher_key:e.code,lokasi_beli_voucher:e.lokasi_beli_voucher.name,imei:String(e.imei)};e.membershipApiService.check(t,i).subscribe((function(t){console.log(e.lokasi_beli_voucher),e.navCtrl.navigateForward(["/landing/membership-activation/device-detail"],{queryParams:{code:e.code,imei:e.imei,lokasi_beli_voucher:e.lokasi_beli_voucher.name}})}),(function(t){e.utilsService.showToast(t.error.message)}))}))}},{key:"hideKeyboard",value:function(){this.utilsService.hideKeyboard()}}]),e}(),d.\u0275fac=function(e){return new(e||d)(_.Lb(y.b),_.Lb(k.a),_.Lb(P.a),_.Lb(r.T),_.Lb(S.a),_.Lb(C.a),_.Lb(w.a),_.Lb(r.R),_.Lb(s.g),_.Lb(O.a))},d.\u0275cmp=_.Fb({type:d,selectors:[["app-index"]],decls:31,vars:9,consts:[["mode","md",3,"translucent"],[1,"toolbar-color"],["slot","start",2,"color","white"],[2,"color","white"],["fullscreen",""],[1,"middle-page"],["position","floating"],[3,"ngModel","ngModelChange","keyup.enter"],["type","number",3,"ngModel","readonly","ngModelChange","keyup.enter"],["for","lokasi_beli_voucher",2,"color","black"],["id","lokasi_beli_voucher","type","text",1,"w3-input",3,"ngModel","ngbTypeahead","inputFormatter","resultFormatter","editable","ngModelChange"],[1,"ion-padding"],["expand","block",1,"ion-margin",3,"click"]],template:function(e,t){1&e&&(_.Qb(0,"ion-header",0),_.Qb(1,"ion-toolbar",1),_.Qb(2,"ion-buttons",2),_.Mb(3,"ion-back-button"),_.Pb(),_.Qb(4,"ion-title",3),_.Ac(5,"Membership Activation"),_.Pb(),_.Pb(),_.Pb(),_.Qb(6,"ion-content",4),_.Qb(7,"div",5),_.Qb(8,"ion-card"),_.Qb(9,"ion-card-header"),_.Qb(10,"ion-card-title"),_.Qb(11,"h3"),_.Ac(12,"Aktivasikan Membership ZFix Anda"),_.Pb(),_.Pb(),_.Qb(13,"ion-card-subtitle"),_.Ac(14," Masukkan kode aktivasi yang tertera pada kemasan ZFix dan gadget IMEI terdaftar pada saat pembelian "),_.Pb(),_.Pb(),_.Qb(15,"ion-card-content"),_.Qb(16,"ion-item"),_.Qb(17,"ion-label",6),_.Ac(18,"Kode Aktivasi ZFix"),_.Pb(),_.Qb(19,"ion-input",7),_.cc("ngModelChange",(function(e){return t.code=e}))("keyup.enter",(function(){return t.hideKeyboard()})),_.Pb(),_.Pb(),_.Qb(20,"ion-item"),_.Qb(21,"ion-label",6),_.Ac(22,"IMEI"),_.Pb(),_.Qb(23,"ion-input",8),_.cc("ngModelChange",(function(e){return t.imei=e}))("keyup.enter",(function(){return t.hideKeyboard()})),_.Pb(),_.Pb(),_.Qb(24,"label",9),_.Ac(25,"Lokasi Beli Membership"),_.Pb(),_.Mb(26,"br"),_.Qb(27,"input",10),_.cc("ngModelChange",(function(e){return t.lokasi_beli_voucher=e})),_.Pb(),_.Qb(28,"div",11),_.Qb(29,"ion-button",12),_.cc("click",(function(){return t.submit()})),_.Ac(30,"AKTIVASI"),_.Pb(),_.Pb(),_.Pb(),_.Pb(),_.Pb(),_.Pb()),2&e&&(_.jc("translucent",!0),_.zb(19),_.jc("ngModel",t.code),_.zb(4),_.jc("ngModel",t.imei)("readonly",!t.imeiEditable),_.zb(4),_.jc("ngModel",t.lokasi_beli_voucher)("ngbTypeahead",t.search)("inputFormatter",t.formatter)("resultFormatter",t.formatter)("editable",!1))},directives:[r.s,r.O,r.i,r.f,r.g,r.N,r.p,r.j,r.l,r.n,r.m,r.k,r.w,r.x,r.v,r.W,o.g,o.j,r.S,o.a,M.b,r.h],styles:["input[_ngcontent-%COMP%]{padding-left:15px;color:#000}label[_ngcontent-%COMP%]{padding-top:20px}"]}),d)}],Q=((p=function e(){_classCallCheck(this,e)}).\u0275mod=_.Jb({type:p}),p.\u0275inj=_.Ib({factory:function(e){return new(e||p)},imports:[[s.j.forChild(A)],s.j]}),p),I=((f=function e(){_classCallCheck(this,e)}).\u0275mod=_.Jb({type:f}),f.\u0275inj=_.Ib({factory:function(e){return new(e||f)},imports:[[n.b,o.b,r.P,Q,M.c]]}),f)}}]);