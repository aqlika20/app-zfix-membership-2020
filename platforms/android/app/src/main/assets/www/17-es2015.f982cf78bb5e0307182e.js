(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{hhq5:function(e,i,t){"use strict";t.r(i),t.d(i,"IndexPageModule",(function(){return Q}));var s=t("ofXK"),n=t("3Pt+"),o=t("TEn/"),r=t("tyNb"),a=t("Iuce"),c=t("7o/Q"),l=t("D0XW");class h{constructor(e,i){this.dueTime=e,this.scheduler=i}call(e,i){return i.subscribe(new b(e,this.dueTime,this.scheduler))}}class b extends c.a{constructor(e,i,t){super(e),this.dueTime=i,this.scheduler=t,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(u,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function u(e){e.debouncedNext()}var d=t("/uUt"),m=t("pLZG"),p=t("lJxs"),g=t("fXoL"),v=t("e8h1"),P=t("JN8Z"),k=t("WOgW"),f=t("UhDz"),S=t("tNc6"),_=t("xyIN"),M=t("54vc"),y=t("1kSV");const A=[{path:"",component:(()=>{class e{constructor(e,i,t,s,n,o,r,a,c,b){this.storage=e,this.uid=i,this.androidPermissions=t,this.platform=s,this.membershipApiService=n,this.utilsService=o,this.membership=r,this.navCtrl=a,this.router=c,this.splashScreen=b,this.imeiEditable=!0,this.stores=[],this.searchedStores=[],this.formatter=e=>e.name,this.search=e=>e.pipe(function(e,i=l.a){return t=>t.lift(new h(e,i))}(100),Object(d.a)(),Object(m.a)(e=>e.length>=1),Object(p.a)(e=>{var i;return null===(i=this.searchedStores.data)||void 0===i?void 0:i.store.filter(i=>new RegExp(e,"mi").test(i.name)).slice(0,5)})),"android"==this.platform.platforms()[0]&&(this.imei=this.uid.IMEI,null!=this.imei&&(this.imeiEditable=!1))}ngOnInit(){this.getPermission()}ionViewWillEnter(){this.getStore(),this.membership.removeMembershipActivation()}getPermission(){this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.READ_PHONE_STATE).then(e=>{e.hasPermission||this.androidPermissions.requestPermission(this.androidPermissions.PERMISSION.READ_PHONE_STATE).then(e=>{this.utilsService.restart("Aplikasi akan memulai kembali secara otomatis untuk menampilkan IMEI.")}).catch(e=>{this.utilsService.showAlert(e)})}).catch(e=>{this.utilsService.showAlert(e)})}getStore(){this.storage.get(a.d).then(e=>{this.membershipApiService.getStore(e).subscribe(e=>{this.stores=e,this.searchedStores=this.stores,console.log(this.searchedStores)},e=>{this.stores=[],this.searchedStores=[],this.utilsService.showToast("There is a problem.")})})}submit(){null==this.code||null==this.imei||null==this.lokasi_beli_voucher||""==this.code.replace(/\s/g,"")?this.utilsService.showToast("Lengkapi pengisian form."):this.storage.get(a.d).then(e=>{let i={request_code:0,voucher_key:this.code,lokasi_beli_voucher:this.lokasi_beli_voucher.name,imei:String(this.imei)};this.membershipApiService.check(e,i).subscribe(e=>{console.log(this.lokasi_beli_voucher),this.navCtrl.navigateForward(["/landing/membership-activation/device-detail"],{queryParams:{code:this.code,imei:this.imei,lokasi_beli_voucher:this.lokasi_beli_voucher.name}})},e=>{this.utilsService.showToast(e.error.message)})})}hideKeyboard(){this.utilsService.hideKeyboard()}}return e.\u0275fac=function(i){return new(i||e)(g.Lb(v.b),g.Lb(P.a),g.Lb(k.a),g.Lb(o.T),g.Lb(f.a),g.Lb(S.a),g.Lb(_.a),g.Lb(o.R),g.Lb(r.g),g.Lb(M.a))},e.\u0275cmp=g.Fb({type:e,selectors:[["app-index"]],decls:31,vars:9,consts:[["mode","md",3,"translucent"],[1,"toolbar-color"],["slot","start",2,"color","white"],[2,"color","white"],["fullscreen",""],[1,"middle-page"],["position","floating"],[3,"ngModel","ngModelChange","keyup.enter"],["type","number",3,"ngModel","readonly","ngModelChange","keyup.enter"],["for","lokasi_beli_voucher",2,"color","black"],["id","lokasi_beli_voucher","type","text",1,"w3-input",3,"ngModel","ngbTypeahead","inputFormatter","resultFormatter","editable","ngModelChange"],[1,"ion-padding"],["expand","block",1,"ion-margin",3,"click"]],template:function(e,i){1&e&&(g.Qb(0,"ion-header",0),g.Qb(1,"ion-toolbar",1),g.Qb(2,"ion-buttons",2),g.Mb(3,"ion-back-button"),g.Pb(),g.Qb(4,"ion-title",3),g.Ac(5,"Membership Activation"),g.Pb(),g.Pb(),g.Pb(),g.Qb(6,"ion-content",4),g.Qb(7,"div",5),g.Qb(8,"ion-card"),g.Qb(9,"ion-card-header"),g.Qb(10,"ion-card-title"),g.Qb(11,"h3"),g.Ac(12,"Aktivasikan Membership ZFix Anda"),g.Pb(),g.Pb(),g.Qb(13,"ion-card-subtitle"),g.Ac(14," Masukkan kode aktivasi yang tertera pada kemasan ZFix dan gadget IMEI terdaftar pada saat pembelian "),g.Pb(),g.Pb(),g.Qb(15,"ion-card-content"),g.Qb(16,"ion-item"),g.Qb(17,"ion-label",6),g.Ac(18,"Kode Aktivasi ZFix"),g.Pb(),g.Qb(19,"ion-input",7),g.cc("ngModelChange",(function(e){return i.code=e}))("keyup.enter",(function(){return i.hideKeyboard()})),g.Pb(),g.Pb(),g.Qb(20,"ion-item"),g.Qb(21,"ion-label",6),g.Ac(22,"IMEI"),g.Pb(),g.Qb(23,"ion-input",8),g.cc("ngModelChange",(function(e){return i.imei=e}))("keyup.enter",(function(){return i.hideKeyboard()})),g.Pb(),g.Pb(),g.Qb(24,"label",9),g.Ac(25,"Lokasi Beli Membership"),g.Pb(),g.Mb(26,"br"),g.Qb(27,"input",10),g.cc("ngModelChange",(function(e){return i.lokasi_beli_voucher=e})),g.Pb(),g.Qb(28,"div",11),g.Qb(29,"ion-button",12),g.cc("click",(function(){return i.submit()})),g.Ac(30,"AKTIVASI"),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb()),2&e&&(g.jc("translucent",!0),g.zb(19),g.jc("ngModel",i.code),g.zb(4),g.jc("ngModel",i.imei)("readonly",!i.imeiEditable),g.zb(4),g.jc("ngModel",i.lokasi_beli_voucher)("ngbTypeahead",i.search)("inputFormatter",i.formatter)("resultFormatter",i.formatter)("editable",!1))},directives:[o.s,o.O,o.i,o.f,o.g,o.N,o.p,o.j,o.l,o.n,o.m,o.k,o.w,o.x,o.v,o.W,n.g,n.j,o.S,n.a,y.b,o.h],styles:["input[_ngcontent-%COMP%]{padding-left:15px;color:#000}label[_ngcontent-%COMP%]{padding-top:20px}"]}),e})()}];let w=(()=>{class e{}return e.\u0275mod=g.Jb({type:e}),e.\u0275inj=g.Ib({factory:function(i){return new(i||e)},imports:[[r.j.forChild(A)],r.j]}),e})(),Q=(()=>{class e{}return e.\u0275mod=g.Jb({type:e}),e.\u0275inj=g.Ib({factory:function(i){return new(i||e)},imports:[[s.b,n.b,o.P,w,y.c]]}),e})()}}]);