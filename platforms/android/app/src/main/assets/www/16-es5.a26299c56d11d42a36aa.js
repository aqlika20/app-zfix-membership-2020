function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{n2vj:function(e,n,t){"use strict";t.r(n),t.d(n,"DeviceImagePageModule",(function(){return Q}));var i=t("ofXK"),a=t("3Pt+"),o=t("TEn/"),r=t("tyNb"),c=t("mrSG"),s=t("Iuce"),u=t("HDdC"),l=t("D0XW"),b=t("Y7HM");function d(e){var n=e.subscriber,t=e.counter,i=e.period;n.next(t),this.schedule({subscriber:n,counter:t+1,period:i},i)}var h,p,f,k=t("fXoL"),g=t("e8h1"),v=t("a/9d"),m=t("UhDz"),P=t("tNc6"),C=t("8Y4A"),y=t("/XPu"),w=t("zzaN"),_=[{path:"",component:(h=function(){function e(n,t,i,a,o,r,c,s,u,l,b,d,h,p){_classCallCheck(this,e),this.storage=n,this.camera=t,this.membershipApiService=i,this.utilsService=a,this.router=o,this.activatedRoute=r,this.preview=c,this.socialSharing=s,this.clipboard=u,this.actionSheetController=l,this.platform=b,this.alertController=d,this.navCtrl=h,this.location=p,this.link="https://zfix.id/code/",this.response={}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.activatedRoute.queryParams.subscribe((function(n){e.screenHasProblem=n.screenHasProblem}))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"ionViewWillEnter",value:function(){var e=this;this.getCode(),this.subscription=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.a;return(!Object(b.a)(e)||e<0)&&(e=0),n&&"function"==typeof n.schedule||(n=l.a),new u.a((function(t){return t.add(n.schedule(d,e,{subscriber:t,counter:0,period:e})),t}))}(2e3).subscribe((function(n){e.checkCode()})),this.backButton()}},{key:"share",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actionSheetController.create({header:"Bagikan Link",buttons:[{text:"Share via Whatsapp",icon:"logo-whatsapp",cssClass:"whatsappIcon",handler:function(){t.socialSharing.shareViaWhatsApp(t.link)}},{text:"Copy Link",icon:"copy",cssClass:"copyIcon",handler:function(){t.clipboard.copy(t.link)}},{text:"Cancel",icon:"close",role:"cancel",handler:function(){console.log("Cancel clicked")}}]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getCode",value:function(){var e=this;this.storage.get(s.d).then((function(n){e.storage.get(s.b).then((function(t){var i={voucher_key:t.code,imei:t.imei,device_type:t.type,device_version:t.version,device_manufacturer:t.manufacturer,device_model:t.model,device_ram:t.ram,device_storage:t.storage,lokasi_beli_voucher:t.lokasi_beli_voucher,screen_has_problem:e.screenHasProblem};console.log(i),e.membershipApiService.activation(n,i).subscribe((function(n){e.response=n,e.code=e.response.data.code,e.link=e.link+e.code}),(function(n){console.log(n),e.utilsService.showToast(n.error.message),e.router.navigate(["landing","home"])}))}))}))}},{key:"checkCode",value:function(){var e=this;this.storage.get(s.d).then((function(n){e.membershipApiService.check(n,{request_code:-1,code:e.code}).subscribe((function(n){1==n.received&&e.utilsService.done("Data sudah diterima dan sedang diproses."),e.subscription.unsubscribe()}),(function(e){}))}))}},{key:"backButton",value:function(){var e=this;this.platform.backButton.subscribeWithPriority(10,(function(){e.location.isCurrentPathEqualTo("/landing/membership-activation/device-detail/screen-testing/device-image")?e.back():(console.log("Navigate to back page"),e.location.back())}))}},{key:"back",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"ZFix",message:"Apakah anda yakin ingin kembali ke halaman awal?",backdropDismiss:!1,buttons:[{text:"Tidak",role:"cancel",cssClass:"yourClass",handler:function(){}},{text:"Iya",handler:function(){return Object(c.a)(t,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"ZFix",message:"Jika anda kembali code voucher sudah tidak dapat digunakan kembali.",backdropDismiss:!1,buttons:[{text:"Tidak",role:"cancel",handler:function(){}},{text:"Iya",handler:function(){t.navCtrl.navigateForward(["landing","home"])}}]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}}]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}}]),e}(),h.\u0275fac=function(e){return new(e||h)(k.Lb(g.b),k.Lb(v.a),k.Lb(m.a),k.Lb(P.a),k.Lb(r.g),k.Lb(r.a),k.Lb(C.a),k.Lb(y.a),k.Lb(w.a),k.Lb(o.a),k.Lb(o.T),k.Lb(o.b),k.Lb(o.R),k.Lb(i.g))},h.\u0275cmp=k.Fb({type:h,selectors:[["app-device-image"]],decls:32,vars:3,consts:[["mode","md",3,"translucent"],[1,"toolbar-color"],[2,"color","white"],[1,"middle-page"],[1,"ion-text-center","ion-margin"],["name","link","readonly","",3,"ngModel","ngModelChange"],["expand","block","size","small","float-right","",3,"click"]],template:function(e,n){1&e&&(k.Qb(0,"ion-header",0),k.Qb(1,"ion-toolbar",1),k.Qb(2,"ion-title",2),k.Ac(3,"Device Image"),k.Pb(),k.Pb(),k.Pb(),k.Qb(4,"ion-content"),k.Qb(5,"div",3),k.Qb(6,"ion-card"),k.Qb(7,"ion-card-content"),k.Qb(8,"form"),k.Qb(9,"div",4),k.Qb(10,"h1"),k.Ac(11,"Foto Gadget kamu"),k.Pb(),k.Pb(),k.Qb(12,"div",4),k.Qb(13,"p"),k.Ac(14,"Aktifkan membership kamu dengan foto Gadget kamu secara jelas menggunakan "),k.Qb(15,"b"),k.Ac(16,"Gadget lain"),k.Pb(),k.Pb(),k.Pb(),k.Qb(17,"h3"),k.Ac(18,"Kode Unik"),k.Pb(),k.Qb(19,"ion-card"),k.Qb(20,"h1"),k.Ac(21),k.Pb(),k.Pb(),k.Qb(22,"div",4),k.Qb(23,"p"),k.Ac(24,"Kode Unik, Stiker dan Kondisi Layar harus terlihat jelas saat foto cek fisik untuk verifikasi"),k.Pb(),k.Pb(),k.Qb(25,"div",4),k.Qb(26,"p"),k.Ac(27,"Akses link di bawah ini untuk mengupload foto cek fisik untuk verifikasi"),k.Pb(),k.Pb(),k.Qb(28,"ion-card"),k.Qb(29,"ion-input",5),k.cc("ngModelChange",(function(e){return n.link=e})),k.Pb(),k.Pb(),k.Qb(30,"ion-button",6),k.cc("click",(function(){return n.share()})),k.Ac(31,"Bagikan Link"),k.Pb(),k.Pb(),k.Pb(),k.Pb(),k.Pb(),k.Pb()),2&e&&(k.jc("translucent",!0),k.zb(21),k.Bc(n.code),k.zb(8),k.jc("ngModel",n.link))},directives:[o.s,o.O,o.N,o.p,o.j,o.k,a.o,a.h,a.i,o.v,o.W,a.g,a.j,o.h],styles:["img[_ngcontent-%COMP%]{height:auto;width:auto;margin:auto;display:block}h1[_ngcontent-%COMP%]{font-weight:700;color:#000}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], ion-input[_ngcontent-%COMP%]{text-align:center;margin:0 auto}ion-input[_ngcontent-%COMP%]{color:#000}"]}),h)}],x=((f=function e(){_classCallCheck(this,e)}).\u0275mod=k.Jb({type:f}),f.\u0275inj=k.Ib({factory:function(e){return new(e||f)},imports:[[r.j.forChild(_)],r.j]}),f),Q=((p=function e(){_classCallCheck(this,e)}).\u0275mod=k.Jb({type:p}),p.\u0275inj=k.Ib({factory:function(e){return new(e||p)},imports:[[i.b,a.b,o.P,x]]}),p)}}]);