(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{tQ0C:function(t,e,n){"use strict";n.r(e),n.d(e,"ScreenTestingPageModule",(function(){return m}));var a=n("ofXK"),i=n("3Pt+"),s=n("TEn/"),o=n("tyNb"),r=n("mrSG"),c=n("fXoL"),h=n("tNc6");const l=["screenTest"],u=[{path:"",component:(()=>{class t{constructor(t,e,n,a){this.platform=t,this.utility=e,this.alertController=n,this.navCtrl=a,this.lineWidth=10,this.touching=!1}ionViewWillEnter(){this.canvasElement=this.canvas.nativeElement,this.canvasElement.width=this.platform.width()+"",this.canvasElement.height=this.platform.height()+"";let t=this.canvasElement.getContext("2d");t.fillStyle="blue",t.fillRect(10,10,this.canvasElement.width-20,this.canvasElement.height-20),this.utility.showToast("Bersihkan layar untuk melanjutkan.")}startTouch(t){this.touching=!0,this.test(t)}moveTouch(t){this.touching&&this.test(t)}endTouch(){this.touching=!1,this.checkCanvas()}test(t){const e=this.canvasElement.getBoundingClientRect();let n,a,i=this.canvasElement.getContext("2d");var s;for(s=0;s<t.changedTouches.length;s++)n=t.changedTouches[s].pageX-e.x,a=t.changedTouches[s].pageY-e.y;i.beginPath(),i.globalCompositeOperation="destination-out",i.arc(n,a,42,0,2*Math.PI,!1),i.fill(),this.saveX=n,this.saveY=a}presentAlertConfirm(){return Object(r.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({header:"ZFix",message:"Jika anda tidak dapat melanjutkan test ini, anda bisa melewati dan lanjut ke tahap selanjutnya dengan konfirmasi bahwa layar memiliki masalah.",backdropDismiss:!1,buttons:[{text:"Lanjut",role:"cancel",handler:()=>{console.log("Continue")}},{text:"Lewati",handler:()=>Object(r.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({header:"ZFix",message:"Jika anda skip tahap ini, proses aktivasi tidak dapat dilanjutkan.",backdropDismiss:!1,buttons:[{text:"Lanjut",role:"cancel",handler:()=>{}},{text:"Tetap skip",handler:()=>{this.navCtrl.navigateForward(["landing","home"],{queryParams:{screenHasProblem:1}}),this.utility.showToast("Layar memiliki masalah.")}}]});yield t.present()}))}]});yield t.present()}))}isCanvasBlank(t){let e=this.canvasElement.getContext("2d");return!new Uint32Array(e.getImageData(0,0,t.width,t.height).data.buffer).some(t=>0!==t)}checkCanvas(){this.isCanvasBlank(this.canvasElement)?(this.utility.showToast("Layar telah bersih."),this.navCtrl.navigateForward(["/landing/membership-activation/device-detail/screen-testing/device-image"],{queryParams:{screenHasProblem:0}})):(this.utility.showToast("Layar belum dibersihkan."),this.presentAlertConfirm())}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(s.T),c.Lb(h.a),c.Lb(s.b),c.Lb(s.R))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-screen-testing"]],viewQuery:function(t,e){var n;1&t&&c.Ec(l,!0),2&t&&c.qc(n=c.dc())&&(e.canvas=n.first)},decls:3,vars:1,consts:[["mode","md",3,"fullscreen"],[3,"touchstart","touchmove","touchend"],["screenTest",""]],template:function(t,e){1&t&&(c.Qb(0,"ion-content",0),c.Qb(1,"canvas",1,2),c.cc("touchstart",(function(t){return e.startTouch(t)}))("touchmove",(function(t){return e.moveTouch(t)}))("touchend",(function(){return e.endTouch()})),c.Pb(),c.Pb()),2&t&&c.jc("fullscreen",!0)},directives:[s.p],styles:["ion-content[_ngcontent-%COMP%]{--overflow:hidden}"]}),t})()}];let d=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[o.j.forChild(u)],o.j]}),t})(),m=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[a.b,i.b,s.P,d]]}),t})()}}]);