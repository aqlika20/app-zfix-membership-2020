(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{n2vj:function(e,t,i){"use strict";i.r(t),i.d(t,"DeviceImagePageModule",(function(){return Q}));var n=i("ofXK"),a=i("3Pt+"),o=i("TEn/"),s=i("tyNb"),c=i("mrSG"),r=i("Iuce"),b=i("HDdC"),l=i("D0XW"),h=i("Y7HM");function d(e){const{subscriber:t,counter:i,period:n}=e;t.next(i),this.schedule({subscriber:t,counter:i+1,period:n},n)}var u=i("fXoL"),p=i("e8h1"),g=i("a/9d"),k=i("UhDz"),m=i("tNc6"),v=i("8Y4A"),P=i("/XPu"),f=i("zzaN");const y=[{path:"",component:(()=>{class e{constructor(e,t,i,n,a,o,s,c,r,b,l,h,d,u){this.storage=e,this.camera=t,this.membershipApiService=i,this.utilsService=n,this.router=a,this.activatedRoute=o,this.preview=s,this.socialSharing=c,this.clipboard=r,this.actionSheetController=b,this.platform=l,this.alertController=h,this.navCtrl=d,this.location=u,this.link="https://zfix.id/code/",this.response={}}ngOnInit(){this.activatedRoute.queryParams.subscribe(e=>{this.screenHasProblem=e.screenHasProblem})}ngOnDestroy(){this.subscription.unsubscribe()}ionViewWillEnter(){this.getCode(),this.subscription=function(e=0,t=l.a){return(!Object(h.a)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=l.a),new b.a(i=>(i.add(t.schedule(d,e,{subscriber:i,counter:0,period:e})),i))}(2e3).subscribe(e=>{this.checkCode()}),this.backButton()}share(){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.actionSheetController.create({header:"Bagikan Link",buttons:[{text:"Share via Whatsapp",icon:"logo-whatsapp",cssClass:"whatsappIcon",handler:()=>{this.socialSharing.shareViaWhatsApp(this.link)}},{text:"Copy Link",icon:"copy",cssClass:"copyIcon",handler:()=>{this.clipboard.copy(this.link)}},{text:"Cancel",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]});yield e.present()}))}getCode(){this.storage.get(r.d).then(e=>{this.storage.get(r.b).then(t=>{let i={voucher_key:t.code,imei:t.imei,device_type:t.type,device_version:t.version,device_manufacturer:t.manufacturer,device_model:t.model,device_ram:t.ram,device_storage:t.storage,lokasi_beli_voucher:t.lokasi_beli_voucher,screen_has_problem:this.screenHasProblem};console.log(i),this.membershipApiService.activation(e,i).subscribe(e=>{this.response=e,this.code=this.response.data.code,this.link=this.link+this.code},e=>{console.log(e),this.utilsService.showToast(e.error.message),this.router.navigate(["landing","home"])})})})}checkCode(){this.storage.get(r.d).then(e=>{this.membershipApiService.check(e,{request_code:-1,code:this.code}).subscribe(e=>{1==e.received&&this.utilsService.done("Data sudah diterima dan sedang diproses."),this.subscription.unsubscribe()},e=>{})})}backButton(){this.platform.backButton.subscribeWithPriority(10,()=>{this.location.isCurrentPathEqualTo("/landing/membership-activation/device-detail/screen-testing/device-image")?this.back():(console.log("Navigate to back page"),this.location.back())})}back(){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({header:"ZFix",message:"Apakah anda yakin ingin kembali ke halaman awal?",backdropDismiss:!1,buttons:[{text:"Tidak",role:"cancel",cssClass:"yourClass",handler:()=>{}},{text:"Iya",handler:()=>Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({header:"ZFix",message:"Jika anda kembali code voucher sudah tidak dapat digunakan kembali.",backdropDismiss:!1,buttons:[{text:"Tidak",role:"cancel",handler:()=>{}},{text:"Iya",handler:()=>{this.navCtrl.navigateForward(["landing","home"])}}]});yield e.present()}))}]});yield e.present()}))}}return e.\u0275fac=function(t){return new(t||e)(u.Lb(p.b),u.Lb(g.a),u.Lb(k.a),u.Lb(m.a),u.Lb(s.g),u.Lb(s.a),u.Lb(v.a),u.Lb(P.a),u.Lb(f.a),u.Lb(o.a),u.Lb(o.T),u.Lb(o.b),u.Lb(o.R),u.Lb(n.g))},e.\u0275cmp=u.Fb({type:e,selectors:[["app-device-image"]],decls:32,vars:3,consts:[["mode","md",3,"translucent"],[1,"toolbar-color"],[2,"color","white"],[1,"middle-page"],[1,"ion-text-center","ion-margin"],["name","link","readonly","",3,"ngModel","ngModelChange"],["expand","block","size","small","float-right","",3,"click"]],template:function(e,t){1&e&&(u.Qb(0,"ion-header",0),u.Qb(1,"ion-toolbar",1),u.Qb(2,"ion-title",2),u.Ac(3,"Device Image"),u.Pb(),u.Pb(),u.Pb(),u.Qb(4,"ion-content"),u.Qb(5,"div",3),u.Qb(6,"ion-card"),u.Qb(7,"ion-card-content"),u.Qb(8,"form"),u.Qb(9,"div",4),u.Qb(10,"h1"),u.Ac(11,"Foto Gadget kamu"),u.Pb(),u.Pb(),u.Qb(12,"div",4),u.Qb(13,"p"),u.Ac(14,"Aktifkan membership kamu dengan foto Gadget kamu secara jelas menggunakan "),u.Qb(15,"b"),u.Ac(16,"Gadget lain"),u.Pb(),u.Pb(),u.Pb(),u.Qb(17,"h3"),u.Ac(18,"Kode Unik"),u.Pb(),u.Qb(19,"ion-card"),u.Qb(20,"h1"),u.Ac(21),u.Pb(),u.Pb(),u.Qb(22,"div",4),u.Qb(23,"p"),u.Ac(24,"Kode Unik, Stiker dan Kondisi Layar harus terlihat jelas saat foto cek fisik untuk verifikasi"),u.Pb(),u.Pb(),u.Qb(25,"div",4),u.Qb(26,"p"),u.Ac(27,"Akses link di bawah ini untuk mengupload foto cek fisik untuk verifikasi"),u.Pb(),u.Pb(),u.Qb(28,"ion-card"),u.Qb(29,"ion-input",5),u.cc("ngModelChange",(function(e){return t.link=e})),u.Pb(),u.Pb(),u.Qb(30,"ion-button",6),u.cc("click",(function(){return t.share()})),u.Ac(31,"Bagikan Link"),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb()),2&e&&(u.jc("translucent",!0),u.zb(21),u.Bc(t.code),u.zb(8),u.jc("ngModel",t.link))},directives:[o.s,o.O,o.N,o.p,o.j,o.k,a.o,a.h,a.i,o.v,o.W,a.g,a.j,o.h],styles:["img[_ngcontent-%COMP%]{height:auto;width:auto;margin:auto;display:block}h1[_ngcontent-%COMP%]{font-weight:700;color:#000}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], ion-input[_ngcontent-%COMP%]{text-align:center;margin:0 auto}ion-input[_ngcontent-%COMP%]{color:#000}"]}),e})()}];let C=(()=>{class e{}return e.\u0275mod=u.Jb({type:e}),e.\u0275inj=u.Ib({factory:function(t){return new(t||e)},imports:[[s.j.forChild(y)],s.j]}),e})(),Q=(()=>{class e{}return e.\u0275mod=u.Jb({type:e}),e.\u0275inj=u.Ib({factory:function(t){return new(t||e)},imports:[[n.b,a.b,o.P,C]]}),e})()}}]);